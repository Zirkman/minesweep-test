<!DOCTYPE html>
<html lang="sk">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hra≈• Minesweeper</title>
    <link rel="icon" type="image/png" href="favicon.png">
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: scale(0.95);
            }

            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        @keyframes pulse-slow {

            0%,
            100% {
                opacity: 1;
            }

            50% {
                opacity: 0.8;
            }
        }

        @keyframes shake {

            0%,
            100% {
                transform: translateX(0);
            }

            25% {
                transform: translateX(-5px);
            }

            75% {
                transform: translateX(5px);
            }
        }

        .animate-fade-in {
            animation: fadeIn 0.3s ease-out forwards;
        }

        .animate-pulse-slow {
            animation: pulse-slow 2s ease-in-out infinite;
        }

        .animate-shake {
            animation: shake 0.3s ease-in-out;
        }

        .cell {
            width: 40px;
            height: 40px;
            border: 2px solid #e5e7eb;
            transition: all 0.2s ease;
            user-select: none;
        }

        .cell:hover:not(.revealed):not(.flagged) {
            background: linear-gradient(135deg, #f3e7ff 0%, #e9d5ff 100%);
            transform: scale(1.05);
            cursor: pointer;
        }

        .cell.revealed {
            background: linear-gradient(135deg, #f9fafb 0%, #f3f4f6 100%);
            border-color: #d1d5db;
        }

        .cell.flagged {
            background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
        }

        .cell.mine {
            background: linear-gradient(135deg, #fee2e2 0%, #fecaca 100%);
        }
    </style>
</head>

<body class="bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50 min-h-screen">

    <!-- Navigation -->
    <nav class="bg-white/80 backdrop-blur-md shadow-lg fixed w-full top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <a href="index.html" class="flex items-center space-x-3 hover:opacity-80 transition-opacity">
                    <img src="logo.png" alt="Minesweeper Logo" class="w-10 h-10 object-contain">
                    <span
                        class="text-2xl font-bold bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent">
                        Minesweeper
                    </span>
                </a>
                <a href="index.html"
                    class="text-gray-700 hover:text-purple-600 transition-colors duration-300 font-medium">
                    ‚Üê Sp√§≈• na Domov
                </a>
            </div>
        </div>
    </nav>

    <!-- Game Container -->
    <div class="pt-24 pb-12 px-4 sm:px-6 lg:px-8">
        <div class="max-w-6xl mx-auto">

            <!-- Game Header -->
            <div class="text-center mb-8 animate-fade-in">
                <h1
                    class="text-4xl md:text-5xl font-bold mb-4 bg-gradient-to-r from-purple-600 via-pink-600 to-red-600 bg-clip-text text-transparent">
                    Minesweeper
                </h1>
                <p class="text-gray-600 text-lg">Odhal v≈°etky pol√≠ƒçka bez m√≠n a vyhraj!</p>
            </div>

            <!-- Difficulty Selection -->
            <div class="bg-white/80 backdrop-blur-sm rounded-3xl p-6 shadow-xl mb-6 animate-fade-in">
                <div class="flex flex-wrap justify-center gap-4">
                    <button onclick="startGame('easy')"
                        class="difficulty-btn bg-gradient-to-r from-green-500 to-teal-500 text-white px-8 py-3 rounded-xl font-bold shadow-lg hover:shadow-green-500/50 transform hover:scale-105 transition-all duration-300">
                        Zaƒçiatoƒçn√≠k (8x8)
                    </button>
                    <button onclick="startGame('medium')"
                        class="difficulty-btn bg-gradient-to-r from-blue-500 to-cyan-500 text-white px-8 py-3 rounded-xl font-bold shadow-lg hover:shadow-blue-500/50 transform hover:scale-105 transition-all duration-300">
                        Pokroƒçil√Ω (12x12)
                    </button>
                    <button onclick="startGame('hard')"
                        class="difficulty-btn bg-gradient-to-r from-red-500 to-pink-500 text-white px-8 py-3 rounded-xl font-bold shadow-lg hover:shadow-red-500/50 transform hover:scale-105 transition-all duration-300">
                        Expert (16x16)
                    </button>
                </div>
            </div>

            <!-- Game Stats -->
            <div class="grid grid-cols-3 gap-4 mb-6 animate-fade-in">
                <div
                    class="bg-gradient-to-br from-purple-500 to-pink-500 rounded-2xl p-4 text-white shadow-xl text-center">
                    <div class="text-3xl font-bold" id="mineCount">10</div>
                    <div class="text-purple-100 text-sm">Zost√°vaj√∫ce M√≠ny</div>
                </div>
                <div
                    class="bg-gradient-to-br from-blue-500 to-cyan-500 rounded-2xl p-4 text-white shadow-xl text-center">
                    <div class="text-3xl font-bold" id="timer">0</div>
                    <div class="text-blue-100 text-sm">ƒåas (sekundy)</div>
                </div>
                <div
                    class="bg-gradient-to-br from-green-500 to-teal-500 rounded-2xl p-4 text-white shadow-xl text-center">
                    <div class="text-3xl font-bold" id="moves">0</div>
                    <div class="text-green-100 text-sm">Poƒçet ≈§ahov</div>
                </div>
            </div>

            <!-- Game Board -->
            <div class="bg-white/80 backdrop-blur-sm rounded-3xl p-8 shadow-2xl mb-6 animate-fade-in">
                <div id="gameBoard" class="inline-block mx-auto"></div>
                <div id="gameMessage" class="text-center mt-6 text-xl font-bold hidden"></div>
            </div>

            <!-- Control Buttons -->
            <div class="flex justify-center gap-4 animate-fade-in">
                <button onclick="resetGame()"
                    class="bg-gradient-to-r from-purple-600 to-pink-600 text-white px-8 py-3 rounded-xl font-bold shadow-lg hover:shadow-purple-500/50 transform hover:scale-105 transition-all duration-300">
                    üîÑ Nov√° Hra
                </button>
                <button onclick="showHint()"
                    class="bg-gradient-to-r from-yellow-500 to-orange-500 text-white px-8 py-3 rounded-xl font-bold shadow-lg hover:shadow-yellow-500/50 transform hover:scale-105 transition-all duration-300">
                    üí° N√°poveda
                </button>
            </div>

            <!-- Instructions -->
            <div class="bg-white/70 backdrop-blur-sm rounded-3xl p-6 shadow-xl mt-8 animate-fade-in">
                <h3 class="text-2xl font-bold mb-4 text-gray-800 text-center">Ako Hra≈•</h3>
                <div class="grid md:grid-cols-2 gap-4 text-gray-700">
                    <div class="flex items-start space-x-3">
                        <span class="text-2xl">üñ±Ô∏è</span>
                        <div>
                            <strong>ƒΩav√© tlaƒçidlo:</strong> Odhal pol√≠ƒçko
                        </div>
                    </div>
                    <div class="flex items-start space-x-3">
                        <span class="text-2xl">üö©</span>
                        <div>
                            <strong>Prav√© tlaƒçidlo:</strong> Oznaƒç m√≠nu vlajkou
                        </div>
                    </div>
                    <div class="flex items-start space-x-3">
                        <span class="text-2xl">üî¢</span>
                        <div>
                            <strong>ƒå√≠sla:</strong> Poƒçet m√≠n v okol√≠ (8 pol√≠ƒçok)
                        </div>
                    </div>
                    <div class="flex items-start space-x-3">
                        <span class="text-2xl">üéØ</span>
                        <div>
                            <strong>Cieƒæ:</strong> Odhal v≈°etky pol√≠ƒçka bez m√≠n
                        </div>
                    </div>
                </div>
            </div>

        </div>
    </div>

    <script>
        let board = [];
        let revealed = [];
        let flagged = [];
        let rows = 8;
        let cols = 8;
        let mineCount = 10;
        let gameStarted = false;
        let gameOver = false;
        let timer = 0;
        let timerInterval = null;
        let moves = 0;
        let firstClick = true;

        const difficulties = {
            easy: { rows: 8, cols: 8, mines: 10 },
            medium: { rows: 12, cols: 12, mines: 25 },
            hard: { rows: 16, cols: 16, mines: 50 }
        };

        function startGame(difficulty) {
            const config = difficulties[difficulty];
            rows = config.rows;
            cols = config.cols;
            mineCount = config.mines;
            resetGame();
        }

        function initBoard() {
            board = Array(rows).fill(null).map(() => Array(cols).fill(0));
            revealed = Array(rows).fill(null).map(() => Array(cols).fill(false));
            flagged = Array(rows).fill(null).map(() => Array(cols).fill(false));
            gameOver = false;
            gameStarted = false;
            firstClick = true;
            moves = 0;
            timer = 0;

            if (timerInterval) {
                clearInterval(timerInterval);
                timerInterval = null;
            }

            updateStats();
            document.getElementById('gameMessage').classList.add('hidden');
        }

        function placeMines(excludeRow, excludeCol) {
            let minesPlaced = 0;
            while (minesPlaced < mineCount) {
                const row = Math.floor(Math.random() * rows);
                const col = Math.floor(Math.random() * cols);

                // Don't place mine on first click or adjacent cells
                const isFirstClick = Math.abs(row - excludeRow) <= 1 && Math.abs(col - excludeCol) <= 1;

                if (board[row][col] !== -1 && !isFirstClick) {
                    board[row][col] = -1;
                    minesPlaced++;

                    // Update adjacent cells
                    for (let i = -1; i <= 1; i++) {
                        for (let j = -1; j <= 1; j++) {
                            const newRow = row + i;
                            const newCol = col + j;
                            if (newRow >= 0 && newRow < rows && newCol >= 0 && newCol < cols && board[newRow][newCol] !== -1) {
                                board[newRow][newCol]++;
                            }
                        }
                    }
                }
            }
        }

        function createBoard() {
            const gameBoard = document.getElementById('gameBoard');
            gameBoard.innerHTML = '';
            gameBoard.style.display = 'grid';
            gameBoard.style.gridTemplateColumns = `repeat(${cols}, 40px)`;
            gameBoard.style.gap = '2px';
            gameBoard.style.justifyContent = 'center';

            for (let i = 0; i < rows; i++) {
                for (let j = 0; j < cols; j++) {
                    const cell = document.createElement('div');
                    cell.className = 'cell bg-gradient-to-br from-purple-200 to-pink-200 rounded-lg flex items-center justify-center font-bold text-lg';
                    cell.dataset.row = i;
                    cell.dataset.col = j;

                    cell.addEventListener('click', () => handleCellClick(i, j));
                    cell.addEventListener('contextmenu', (e) => {
                        e.preventDefault();
                        handleRightClick(i, j);
                    });

                    gameBoard.appendChild(cell);
                }
            }
        }

        function handleCellClick(row, col) {
            if (gameOver || revealed[row][col] || flagged[row][col]) return;

            if (firstClick) {
                placeMines(row, col);
                firstClick = false;
                startTimer();
            }

            moves++;
            updateStats();

            if (board[row][col] === -1) {
                revealMines();
                endGame(false);
                return;
            }

            revealCell(row, col);
            checkWin();
        }

        function handleRightClick(row, col) {
            if (gameOver || revealed[row][col]) return;

            flagged[row][col] = !flagged[row][col];
            updateCell(row, col);
            updateStats();
        }

        function revealCell(row, col) {
            if (row < 0 || row >= rows || col < 0 || col >= cols || revealed[row][col] || flagged[row][col]) {
                return;
            }

            revealed[row][col] = true;
            updateCell(row, col);

            // If empty cell, reveal adjacent cells
            if (board[row][col] === 0) {
                for (let i = -1; i <= 1; i++) {
                    for (let j = -1; j <= 1; j++) {
                        revealCell(row + i, col + j);
                    }
                }
            }
        }

        function updateCell(row, col) {
            const cell = document.querySelector(`[data-row="${row}"][data-col="${col}"]`);

            if (revealed[row][col]) {
                cell.classList.add('revealed');
                cell.classList.remove('flagged');

                if (board[row][col] === -1) {
                    cell.classList.add('mine');
                    cell.innerHTML = 'üí£';
                } else if (board[row][col] > 0) {
                    cell.textContent = board[row][col];
                    const colors = ['', '#3b82f6', '#10b981', '#ef4444', '#8b5cf6', '#f59e0b', '#ec4899', '#6366f1', '#14b8a6'];
                    cell.style.color = colors[board[row][col]];
                }
            } else if (flagged[row][col]) {
                cell.classList.add('flagged');
                cell.innerHTML = 'üö©';
            } else {
                cell.classList.remove('flagged');
                cell.innerHTML = '';
            }
        }

        function revealMines() {
            for (let i = 0; i < rows; i++) {
                for (let j = 0; j < cols; j++) {
                    if (board[i][j] === -1) {
                        revealed[i][j] = true;
                        updateCell(i, j);
                    }
                }
            }
        }

        function checkWin() {
            let revealedCount = 0;
            for (let i = 0; i < rows; i++) {
                for (let j = 0; j < cols; j++) {
                    if (revealed[i][j] && board[i][j] !== -1) {
                        revealedCount++;
                    }
                }
            }

            if (revealedCount === rows * cols - mineCount) {
                endGame(true);
            }
        }

        function endGame(won) {
            gameOver = true;
            if (timerInterval) {
                clearInterval(timerInterval);
            }

            const message = document.getElementById('gameMessage');
            message.classList.remove('hidden');

            if (won) {
                message.innerHTML = 'üéâ Gratulujeme! Vyhral si! üéâ';
                message.className = 'text-center mt-6 text-2xl font-bold bg-gradient-to-r from-green-600 to-teal-600 bg-clip-text text-transparent';
            } else {
                message.innerHTML = 'üí• Boom! Trafil si m√≠nu! Sk√∫s znova! üí•';
                message.className = 'text-center mt-6 text-2xl font-bold bg-gradient-to-r from-red-600 to-pink-600 bg-clip-text text-transparent animate-shake';
            }
        }

        function startTimer() {
            timerInterval = setInterval(() => {
                timer++;
                document.getElementById('timer').textContent = timer;
            }, 1000);
        }

        function updateStats() {
            const flagCount = flagged.flat().filter(f => f).length;
            document.getElementById('mineCount').textContent = mineCount - flagCount;
            document.getElementById('moves').textContent = moves;
        }

        function resetGame() {
            initBoard();
            createBoard();
        }

        function showHint() {
            if (gameOver || firstClick) return;

            // Find a safe cell to reveal
            for (let i = 0; i < rows; i++) {
                for (let j = 0; j < cols; j++) {
                    if (!revealed[i][j] && !flagged[i][j] && board[i][j] !== -1) {
                        const cell = document.querySelector(`[data-row="${i}"][data-col="${j}"]`);
                        cell.style.background = 'linear-gradient(135deg, #fef3c7 0%, #fde68a 100%)';
                        setTimeout(() => {
                            cell.style.background = '';
                        }, 1000);
                        return;
                    }
                }
            }
        }

        // Initialize game on load
        window.addEventListener('load', () => {
            resetGame();
        });
    </script>

</body>

</html>